// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
// @generated-id: bfee09473eda

package provider

import (
	"context"
	"github.com/hashicorp/terraform-plugin-framework/diag"
	"github.com/hashicorp/terraform-plugin-framework/types"
	tfTypes "github.com/teamlumos/terraform-provider-lumos/internal/provider/types"
	"github.com/teamlumos/terraform-provider-lumos/internal/sdk/models/operations"
	"github.com/teamlumos/terraform-provider-lumos/internal/sdk/models/shared"
)

func (r *AccessPoliciesDataSourceModel) RefreshFromSharedPageAccessPolicyOutput(ctx context.Context, resp *shared.PageAccessPolicyOutput) diag.Diagnostics {
	var diags diag.Diagnostics

	if resp != nil {
		r.Items = []tfTypes.AccessPolicyOutput{}

		for _, itemsItem := range resp.Items {
			var items tfTypes.AccessPolicyOutput

			items.Apps = []tfTypes.AccessPolicyAppOutput{}

			for _, appsItem := range itemsItem.Apps {
				var apps tfTypes.AccessPolicyAppOutput

				apps.ID = types.StringValue(appsItem.ID)
				apps.IsPreapproved = types.BoolValue(appsItem.IsPreapproved)
				apps.Permissions = []tfTypes.AccessPolicyPermissionInput{}

				for _, permissionsItem := range appsItem.Permissions {
					var permissions tfTypes.AccessPolicyPermissionInput

					permissions.ID = types.StringPointerValue(permissionsItem.ID)

					apps.Permissions = append(apps.Permissions, permissions)
				}

				items.Apps = append(items.Apps, apps)
			}
			items.BusinessJustification = types.StringValue(itemsItem.BusinessJustification)
			items.ID = types.StringValue(itemsItem.ID)
			items.IsEveryoneCondition = types.BoolValue(itemsItem.IsEveryoneCondition)
			items.Name = types.StringValue(itemsItem.Name)

			r.Items = append(r.Items, items)
		}
		r.Page = types.Int64PointerValue(resp.Page)
		r.Pages = types.Int64PointerValue(resp.Pages)
		r.Size = types.Int64PointerValue(resp.Size)
		r.Total = types.Int64PointerValue(resp.Total)
	}

	return diags
}

func (r *AccessPoliciesDataSourceModel) ToOperationsListAccessPoliciesAccessPoliciesGetRequest(ctx context.Context) (*operations.ListAccessPoliciesAccessPoliciesGetRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	page := new(int64)
	if !r.Page.IsUnknown() && !r.Page.IsNull() {
		*page = r.Page.ValueInt64()
	} else {
		page = nil
	}
	size := new(int64)
	if !r.Size.IsUnknown() && !r.Size.IsNull() {
		*size = r.Size.ValueInt64()
	} else {
		size = nil
	}
	name := new(string)
	if !r.Name.IsUnknown() && !r.Name.IsNull() {
		*name = r.Name.ValueString()
	} else {
		name = nil
	}
	out := operations.ListAccessPoliciesAccessPoliciesGetRequest{
		Page: page,
		Size: size,
		Name: name,
	}

	return &out, diags
}
